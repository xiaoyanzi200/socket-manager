(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{KPjf:function(e,n,t){"use strict";t.r(n);var a=t("xwgP"),c=t.n(a),o=t("7pcL"),i=t("3Vho"),l=c.a.memo((e=>{e.demos;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"markdown"},c.a.createElement("h2",{id:"\u4f7f\u7528\u793a\u4f8b"},c.a.createElement(o["AnchorLink"],{to:"#\u4f7f\u7528\u793a\u4f8b","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528\u793a\u4f8b"),c.a.createElement("p",null,"\uff08\u5ba2\u6237\u7aef\uff09"),c.a.createElement("p",null,"\u5efa\u7acb\u8fde\u63a5"),c.a.createElement(i["a"],{code:"SocketConnect.init()\n  .then((_socket) => {\n    port = _socket.$$port;\n    mySocket = new SocketManager(_socket);\n\n    mySocket.listening({\n      port,\n    });\n\n    this.setState(\n      {\n        isWSS: !!_socket.isWSS,\n        // connectState: ACTION_STATE.SUCCESS,\n      },\n      () => {\n        this.init();\n      },\n    );\n  })\n  .catch((e) => {\n    this.setState({\n      connectState: ACTION_STATE.FAIL,\n    });\n  });",lang:"js"}),c.a.createElement("p",null,"\u6302\u8f7d\u5b9e\u4f8b\uff0c\u7ba1\u7406 Socket \u6d88\u606f"),c.a.createElement(i["a"],{code:"import SocketManager from './SocketManager';\nlet mySocket: SocketManager;\ntmpSocket = io(`http://localhost:${port}`, {\n  path: '/socket.io',\n  transports: ['websocket'], // \u5f3a\u5236\u914d\u7f6ewebsocket\uff0c\u907f\u514d\u9ed8\u8ba4\u4f7f\u7528\u8f6e\u8be2\n  forceNew: true,\n  reconnectionAttempts: 3,\n  timeout: 2000,\n});\n\nmySocket = new SocketManager(tmpSocket);\n\nmySocket.listening({\n  port,\n});",lang:"ts"}),c.a.createElement("p",null,"\u53d1\u9001\u6d88\u606f"),c.a.createElement(i["a"],{code:"mySocket\n  .send(data)\n  .then(() => {})\n  .catch(() => {})\n  .finally();",lang:"ts"}),c.a.createElement("h2",{id:"\u4e1a\u52a1\u4fa7\u529f\u80fd\u793a\u4f8b\u53ca\u534f\u8bae\u5c55\u793a\u4ee5\u6253\u5370\u670d\u52a1\u4e3a\u4f8b"},c.a.createElement(o["AnchorLink"],{to:"#\u4e1a\u52a1\u4fa7\u529f\u80fd\u793a\u4f8b\u53ca\u534f\u8bae\u5c55\u793a\u4ee5\u6253\u5370\u670d\u52a1\u4e3a\u4f8b","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u4e1a\u52a1\u4fa7\u529f\u80fd\u793a\u4f8b\u53ca\u534f\u8bae\u5c55\u793a\uff0c\u4ee5\u6253\u5370\u670d\u52a1\u4e3a\u4f8b"),c.a.createElement("p",null,"\u67e5\u8be2\u6253\u5370\u8f6f\u4ef6\u7248\u672c"),c.a.createElement(i["a"],{code:"export const init = () => {\n  const data = {\n    type: 'init',\n    mod: 'system',\n    args: {\n      mid: merchantId,\n    },\n  };\n  return mySocket.send(data);\n};",lang:"ts"}),c.a.createElement("p",null,"\u6784\u9020\u5355\u5411\u8bf7\u6c42\uff0c\u67e5\u8be2\u6253\u5370\u673a\u5217\u8868;"),c.a.createElement(i["a"],{code:"export const getPrinterList = async () => {\n  if (!tmpSocket?.connected) {\n    await ConnectSocket(merchantId);\n  }\n  // \u67e5\u8be2\u6253\u5370\u673a\u5217\u8868\n  const data = {\n    type: 'getPrinters',\n    mod: 'printer',\n    args: {},\n  };\n  return mySocket.send(data);\n};",lang:"ts"}),c.a.createElement("p",null,"\u65ad\u5f00\u8fde\u63a5"),c.a.createElement(i["a"],{code:"export const disConnect = () => {\n  mySocket.disconnect();\n};",lang:"ts"}),c.a.createElement("h2",{id:"socketio-\u8c03\u8bd5\u5de5\u5177"},c.a.createElement(o["AnchorLink"],{to:"#socketio-\u8c03\u8bd5\u5de5\u5177","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"socket.io \u8c03\u8bd5\u5de5\u5177"),c.a.createElement("p",null,c.a.createElement(o["Link"],{to:"https://amritb.github.io/socketio-client-tool/#eyJsaXN0ZW4iOlsib2siLCJzb2NrZXRpby1jbGllbnQiLCJtZXNzYWdlIiwiYXBpU3VjY2VzcyIsImFwaUZhaWwiXSwiZW1pdCI6WyJhcGkiLCJhcGkiLCJzb2NrZXRpby1jbGllbnQiLCJzb2NrZXRpby1jbGllbnQtYWNrIl0sImNvbmZpZyI6IntcInBhdGhcIjogXCIvc29ja2V0LmlvXCIsIFwiZm9yY2VOZXdcIjogdHJ1ZSwgXCJyZWNvbm5lY3Rpb25BdHRlbXB0c1wiOiAzLCBcInRpbWVvdXRcIjogMjAwMH0ifQ=="},"https://amritb.github.io/socketio-client-tool/#eyJsaXN0ZW4iOlsib2siLCJzb2NrZXRpby1jbGllbnQiLCJtZXNzYWdlIiwiYXBpU3VjY2VzcyIsImFwaUZhaWwiXSwiZW1pdCI6WyJhcGkiLCJhcGkiLCJzb2NrZXRpby1jbGllbnQiLCJzb2NrZXRpby1jbGllbnQtYWNrIl0sImNvbmZpZyI6IntcInBhdGhcIjogXCIvc29ja2V0LmlvXCIsIFwiZm9yY2VOZXdcIjogdHJ1ZSwgXCJyZWNvbm5lY3Rpb25BdHRlbXB0c1wiOiAzLCBcInRpbWVvdXRcIjogMjAwMH0ifQ=="))))}));n["default"]=e=>{var n=c.a.useContext(o["context"]),t=n.demos;return c.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),c.a.createElement(l,{demos:t})}}}]);